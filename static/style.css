/* ===== ベース ===== */
:root {
  --bg-grad-1: #fdf1ff;
  --bg-grad-2: #f0faff;
  --brand: #de5fa7;
  --brand-strong: #c94b91;
  --accent: #f582ae;
  --accent-strong: #e0679d;
  --ink: #444;
  --ink-soft: #666;
  --panel: #ffffff;
  --panel-border: #ffd6e9;
  --panel-shadow: rgba(0, 0, 0, 0.1);
  --focus: rgba(255, 128, 181, 0.5);

  --success: #22c55e;
  --success-bg: #eafaf0;
  --danger: #ef4444;
  --danger-bg: #feeeee;
  --warning: #f59e0b;

  --muted: #999;
}

* { box-sizing: border-box; }

html, body {
  height: 100%;
}

body {
  font-family: "Noto Sans JP", "Kosugi Maru", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  background: linear-gradient(135deg, var(--bg-grad-1), var(--bg-grad-2));
  margin: 0;
  padding: 0;
  color: var(--ink);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ===== コンテナ ===== */
.container {
  max-width: 760px;
  margin: 40px auto;
  background: var(--panel);
  padding: 32px 36px;
  border-radius: 28px;
  box-shadow: 0 12px 36px var(--panel-shadow);
  border: 3px dashed var(--panel-border);
  transition: box-shadow .25s ease, transform .25s ease;
}

.container:hover {
  box-shadow: 0 16px 44px rgba(0,0,0,.12);
  transform: translateY(-2px);
}

/* ===== 見出し ===== */
h1 {
  text-align: center;
  color: var(--brand);
  font-size: 30px;
  margin: 0 0 22px;
  text-shadow: 1px 1px 0 #fff0f5;
  letter-spacing: .5px;
}

/* ===== フォーム ===== */
.form-card {
  display: flex;
  flex-direction: column;
  gap: 18px;
}

.form-group label {
  font-weight: 700;
  margin-bottom: 6px;
  display: block;
  color: #a24e8c;
}

/* 共通入力 */
select,
textarea,
button {
  width: 100%;
  padding: 12px 14px;
  border-radius: 16px;
  border: 1px solid #ddd;
  font-size: 15px;
  font-family: inherit;
  transition: border-color .2s ease, box-shadow .2s ease, transform .1s ease;
  background-color: #fff;
}

/* フォーカス */
select:focus,
textarea:focus {
  outline: none;
  border-color: #ff80b5;
  box-shadow: 0 0 0 4px var(--focus);
}

/* テキストエリア */
textarea {
  resize: vertical;
  min-height: 110px;
  background-color: #fffafd;
}

/* 文字数カウンタ */
.char-counter {
  margin-top: 6px;
  font-size: 12px;
  color: var(--muted);
}

/* ===== ボタン ===== */
button {
  background-color: var(--accent);
  color: #fff;
  font-weight: 700;
  border: none;
  cursor: pointer;
  box-shadow: 0 4px 10px rgba(245, 130, 174, 0.35);
}

button:hover {
  background-color: var(--accent-strong);
  transform: translateY(-1px);
}

button:active {
  transform: translateY(0);
}

button:disabled {
  opacity: .6;
  cursor: not-allowed;
  transform: none;
}

/* セカンダリ／削除 */
.secondary-btn {
  background: #fff;
  color: var(--brand);
  border: 1px solid #f5b6d3;
  box-shadow: none;
  padding: 8px 12px;
  border-radius: 14px;
}

.secondary-btn:hover {
  background: #fff7fb;
  color: var(--brand-strong);
}

.delete-btn {
  background: var(--danger);
  box-shadow: 0 4px 10px rgba(239, 68, 68, .25);
  padding: 8px 12px;
  border-radius: 14px;
}

.delete-btn:hover {
  background: #dc2626;
}

/* ===== 結果・カード ===== */
.result-box {
  background: #fff2f7;
  border-left: 6px solid #f48fb1;
  padding: 14px 18px;
  border-radius: 16px;
  margin-top: 22px;
  font-size: 15px;
  line-height: 1.7;
  box-shadow: 0 6px 14px rgba(0, 0, 0, 0.06);
}

.result-box p {
  margin: 8px 0;
}

/* エラー表示 */
.error-box {
  background: var(--danger-bg);
  border-left-color: var(--danger);
}

/* ストック一覧 */
.result-box ul {
  padding-left: 1.25em;
  margin: 8px 0 0;
}

.result-box ul li {
  margin: 10px 0;
  list-style: disc;
}

.display-question {
  color: var(--ink-soft);
}

.stock-actions {
  margin-top: 8px;
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.result-box ul li form {
  display: inline-block;
}

.result-box ul li form button {
  text-decoration: none;
  font-size: 13px;
}

/* ===== criteria バッジ ===== */
.criteria-list {
  padding-left: 1.1em;
  margin: 8px 0 0;
}

.criteria-list li {
  margin: 8px 0;
  list-style: none;
  display: flex;
  align-items: center;
  gap: 8px;
}

.badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 22px;
  height: 22px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 800;
  border: 2px solid transparent;
}

.badge.ok {
  background: var(--success-bg);
  color: var(--success);
  border-color: var(--success);
}

.badge.ng {
  background: var(--danger-bg);
  color: var(--danger);
  border-color: var(--danger);
}

/* ===== ローディングオーバーレイ ===== */
.loading.hidden { display: none; }

.loading {
  position: fixed;
  inset: 0;
  background: rgba(255, 245, 250, 0.75);
  backdrop-filter: blur(2px);
  z-index: 999;
  display: grid;
  place-items: center;
}

.loading .loading-text {
  margin-top: 10px;
  color: var(--brand);
  font-weight: 700;
  text-shadow: 0 1px 0 #fff;
  text-align: center;
}

/* スピナー */
.spinner {
  width: 42px;
  height: 42px;
  border-radius: 50%;
  border: 4px solid #ffd1e7;
  border-top-color: var(--brand);
  animation: spin 0.9s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* ===== アクセシビリティ／フォーカスリング ===== */
button:focus-visible,
select:focus-visible,
textarea:focus-visible,
.secondary-btn:focus-visible,
.delete-btn:focus-visible {
  outline: none;
  box-shadow: 0 0 0 4px var(--focus);
}

/* ===== レスポンシブ ===== */
@media (max-width: 560px) {
  .container {
    margin: 20px 14px;
    padding: 22px 18px;
    border-radius: 22px;
  }
  h1 { font-size: 24px; }
  select, textarea, button { font-size: 14px; }
  .result-box { font-size: 14px; }
  .stock-actions { gap: 6px; }
}

/* ===== 微調整（フォーム行間） ===== */
.form-group { margin-bottom: 4px; }

/* --- Intro / How-to --- */
.intro {
  background: #fff7fb;
  border: 1px solid #ffd6e9;
  border-radius: 18px;
  padding: 14px 16px;
  margin: -10px 0 18px 0;
  box-shadow: 0 3px 10px rgba(0,0,0,0.04);
  color: #553a50;
  line-height: 1.7;
}

.intro p {
  margin: 0 0 6px 0;
}

.howto summary {
  cursor: pointer;
  list-style: none;
  font-weight: 700;
  color: #a24e8c;
  padding: 8px 0;
}
.howto summary::-webkit-details-marker { display: none; }

.howto[open] summary { color: #de5fa7; }

.howto-body {
  background: #fff;
  border: 1px dashed #ffd6e9;
  border-radius: 14px;
  padding: 12px 14px;
  margin-top: 6px;
  color: #444;
}
.howto-body ol { margin: 0 0 0 18px; }
.howto-body ul { margin: 6px 0 10px 18px; }
.howto-body .note {
  margin-top: 8px;
  font-size: 13px;
  color: #777;
}

